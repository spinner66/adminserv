<?php	// LECTURE	if( in_array(USER_PAGE, array('maps.inc', 'maps-local', 'maps-upload', 'maps-matchset', 'maps-creatematchset')) ){		$mapsDirectoryPath = AdminServ::getMapsDirectoryPath();		$mapsDirectoryList = AdminServUI::getMapsDirectoryList($mapsDirectoryPath, $directory);	}		// ACTIONS	$hasDirectory = null;	if($directory){		$hasDirectory = '&d='.$directory;	}		// Nouveau dossier	if( isset($_POST['newFolderValid']) && $_POST['newFolderName'] != null || isset($_POST['newFolderName']) ){		if( Folder::create($mapsDirectoryPath.$directory.Str::replaceChars($_POST['newFolderName'])) !== true ){			AdminServ::error('Impossible de créer le dossier : '.$_POST['newFolderName']);		}		else{			Utils::redirection(false, '?p='. USER_PAGE .$hasDirectory);		}	}	// Renommer un dossier	else if( isset($_POST['optionFolderHiddenFieldAction']) && $_POST['optionFolderHiddenFieldAction'] == 'rename'){		$newDirectory = addslashes($_POST['optionFolderHiddenFieldValue']);				if( ($result = Folder::rename($mapsDirectoryPath.$directory, $mapsDirectoryPath.$newDirectory)) !== true ){			AdminServ::error('Impossible de renommer le dossier : '.$directory.' ('.$result.')');		}		else{			Utils::redirection(false, '?p='. USER_PAGE .'&d='.$newDirectory.'/');		}	}	// Déplacer un dossier	else if( isset($_POST['optionFolderHiddenFieldAction']) && $_POST['optionFolderHiddenFieldAction'] == 'move'){		$newPath = addslashes($_POST['optionFolderHiddenFieldValue']);		if($newPath == '.'){			$newPath = $mapsDirectoryPath;		}		$newPath .= basename($directory).'/';		$newPathFromMapsPath = str_replace($mapsDirectoryPath, '', $newPath);		if($newPathFromMapsPath){			$newPathFromMapsPath = '&d='.$newPathFromMapsPath;		}				if( ($result = Folder::rename($mapsDirectoryPath.$directory, $newPath)) !== true ){			AdminServ::error('Impossible de déplacer le dossier : '.$directory.' ('.$result.')');		}		else{			Utils::redirection(false, '?p='. USER_PAGE .$newPathFromMapsPath);		}	}	// Supprimer un dossier	else if( isset($_POST['optionFolderHiddenFieldAction']) && $_POST['optionFolderHiddenFieldAction'] == 'delete'){		if( ($result = Folder::delete($mapsDirectoryPath.$directory)) !== true ){			AdminServ::error('Impossible de supprimer le dossier : '.$directory.' ('.$result.')');		}		else{			Utils::redirection(false, '?p='. USER_PAGE);		}	}?>