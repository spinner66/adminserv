#labels Featured,Phase-Requirements,Phase-Implementation
*AdminServ* is a dedicated server controller. It's a website that can manage its servers remotely connected on TmForever and ManiaPlanet.


=Requirements=
  * A web server (preferably avoid free servers)
  * PHP version 5.3+
  * A dedicated server TrackMania Forever / ManiaPlanet in use


=2. Installation=
Extract the file "adminserv.zip" where you want on a web server, and access the website via your Internet browser.


=Configuration=

==Servers==

===Online===
The online configuration is enabled by default. If there are no server, Adminserv determines that it is your first connection and request the creation of a password to manage the configuration of servers online.

Once the password is registered, you can add your server:
  * *Server name*: This name is used into the drop-down lists for selecting the server to admin. Special characters are automatically removed.
  * *Address*: The IP address or domain name pointing to the dedicated server.
  * *XMLRPC port*: This port allows you to control the server. It is defined in the file `dedicated_cfg.txt` and must be opened in the firewall and router to access it remotely.


The next information are optional:

  * *MatchSettings of the server*: In general, we use a specific matchsettings for the server containing the list of maps and settings of the game mode. You can set the name of the matchsettings from the *Maps* or *Tracks* folder of the dedicated server to automatically save thereafter. The file extension is not necessary. If the matchsettings does not exist, it will be created.
  * *SuperAdmin, Admin and User levels*: You can for the three permission levels to limit access. The possible values ​​are:
    * *all*: access to all
    * *local*: access only in local network
    * *192.168.0.1, 192.168.0.2*: only from one or several IP address
    * *none*: access removed of the list


Once the server is registered, you can view the list of servers in the *Servers* tab and begin to manage the server by clicking on *Back* to the top right.

To return to the online configuration, just add */config* in the url. You can also change the password at any time in the *Change the password* tab.


===Offline===
It is also possible to edit the configuration file of servers in the Adminserv's folder: */config/servers.cfg.php*
Few notions of PHP will be helpful. The server configuration is the following:
{{{
'Server name' => array(
    'address' => 'localhost',
    'port' => 5000,
    'matchsettings' => 'matchsettings_name',
    'adminlevel' => array(
        'SuperAdmin' => 'all’,
        'Admin' => 'all',
        'User' => 'all',
    )
),
}}}


==AdminServ==

The configuration of Adminserv is optional. The corresponding file is: *config/adminserv.cfg.php*

===OnlineConfig===
  * *ACTIVATE*: Enable or disable the online configuration.
  * *PASSWORD*: MD5 password automatically generated by the configuration server.
  * *ADDRESS*: Limit access to the configuration to the following IP address. Disabled by default. Possibility to put `localhost`.
  * *ADD_ONLY*: Only add servers. You can not see other servers, edit or delete them.

===AdminServConfig===
  * *TITLE*: The title of the application. By default *Admin,Serv* knowing that the comma separates the color.
  * *SUBTITLE*: The subtitle of the application. Put `null` to disable.
  * *LOGO*: The path of the main picture of the application from the folder /ressources/images/. Put `null` to disable.
  * *DEFAULT_THEME*: Default theme loaded at the first connection. The value corresponds to the configuration of the themes: [AdminServ#Extension]
  * *DEFAULT_LANGUAGE*: Default language loaded at the first connection. The value corresponds to the configuration of languages: [AdminServ#Extension]. If the value is auto, then the language is collected automatically.
  * *USE_DISPLAYSERV*: Use the *DisplayServ's* tool on the login page. For the documentation: [DisplayServ]
  * *AUTOSAVE_MATCHSETTINGS*: Saves MatchSettings automatically each time you change game information and add map. The matchsettings saved is defined in the server configuration.
  * *MD5_PASSWORD*: If enabled, the password for the connection will be tested in MD5. You will have to put the password of the dedicated server in MD5 also.
  * *LIMIT_PLAYERS_LIST*: Defines the maximum number of lines on the page "General".
  * *LIMIT_MAPS_LIST*: Defines the maximum number of lines on the mapslist page. No limit for the local maps.
  * *LOCAL_GET_MAPS_ON_SERVER*: If enabled, Adminserv will load the server's map list to make a comparison with local maps. The icon changes its state and it is not possible to rename, move or delete a map used on the server. This prevents errors (for file paths in the matchsettings) and also easy to see which are already on the server. The disadvantage is that loading time will be increased if there are many maps on the server.
  * *RECENT_STATUS_PERIOD*: Period to define the status of a file as new. The time is to specify in hours. In some pages, recently changed lines are highlighted in yellow for the time defined by this.
  * *SERVER_CONNECTION_TIMEOUT*: Maximum time to wait to connect to the server.
  * *COOKIE_EXPIRE*: Number of days before the user settings expire. The parameters stored in the cookie are: theme, language, pseudo in the chat, chat’s color, the last server managed with its level administration.
  * *FOLDERS_OPTIONS*: You can enable or disable the folder options such as: new, rename, move, delete. For each action, there are two parameters to be defined. The activation of the action and the minimum level admin to use this action.
  * *MAPS_HIDDEN_FOLDERS*: Allows to hide unused folders in the maps page.
  * *MATCHSET_HIDDEN_FOLDERS*: Allows to hide unused folders in the matchsettings page.
  * *MAP_EXTENSION*: Double extension to list the maps.
  * *MATCHSET_EXTENSION*: Extension to list the matchsettings.
  * *PLAYLIST_EXTENSION*: Extension to list the playlists (guestlist, blacklist, etc.). Both playlists generated by the dedicated server (guestlist and blacklist) are already taken into consideration.
  * *ALLOWED_EXTENSIONS*: Allowed extensions for file uploads.
  * *SIZE_LIMIT*: The limit size per file sent. If the value is `auto`, is the size of the web server that is used (`php.in`i).
  * *LOGS*: Adminserv's logs. You can enable logs for each file. Page access (`access`), actions used (`action`), errors encountered (`error`). You can add log files in the configuration. Each file is created if it does not exist. To write a log, use:
{{{
AdminServLogs ::add ('file_name_log', 'writing text');
}}}
  * *MULTI_ADMINSERV*: Allows multiple instances of Adminserv. Useful for those who manage many servers. This allows changing the location of folders used for all instances and easier maintenance of Adminserv and the addition of mutualized plugins.
  * *PATH_INCLUDES*: Path of the `includes` folder.
  * *PATH_PLUGINS*: Path of the `plugins` folder.
  * *PATH_RESSOURCES*: Path of the `ressources` folder.
  * *PLUGINS_LIST*: Path to the plugin configuration. By default, the configuration used by Adminserv is Extension.cfg.php. This option allows to define a list of plugins for multiple instances of Adminserv. In the php file specified, it must be have a variable:
{{{
    $PLUGINS = array(
        'pluginfoldername',
    );
}}}
  * *PLUGINS_LIST_TYPE*: The method used for the configuration file for plugins. By default `replace`, the new file replaces the current configuration. But you can also add the following plugins with `add`.

===DataBaseConfig & FTPConfig===
These two configurations are not used by Adminserv. But they can be used for eventual plugins...

==Extension==
The configuration for the extension of Adminserv is in: *config/extension.cfg.php*

  * *PLUGINS*: List of installed plugins. We must put the name of the folder where are all downloaded plugin. To learn more about the plugins: [http://code.google.com/p/adminserv/wiki/Plugins]
  * *THEMES*: List of the color themes. For each theme name, there are two colors to define. The first is the main color (bright color) and the second is the color used for items clicked (light color).
{{{
    'name_of_the_color_of_the_theme' => array(
        'red', // bright color
        'rgba(0, 0, 0, .1)' // light color
    )
}}}
    Colors can be in text, hex and rgb (a).
  * *LANG*: List of available languages​​:
{{{
    'code_lang' => 'title'
}}}
     The language code corresponds both to name of the image (resources/images/lang/) and the file name (/includes/lang/). The title is indicative.
  * *GAMEMODES*: List of game modes The list must be made ​​from ManiaPlanet.
  * *MAPSMENU*: Menu list in the *Maps* pages. You can change the order or add an entry redirecting to a plugin for example.


=Connection=
Once a server configured, simply select it and enter the password of the dedicated server to connect to the administration.

At the next login, Adminserv automatically saves the last used server and selects it. You can also select a server using the ?server=1 to select the second server instance.

The password can be encrypted in MD5 if enabled in the configuration `adminserv.cfg.php`. In this case, it will also need a password md5 for the dedicated server.

You can remove admin levels in the server configuration. Just set the level value to `none`.

You can press any entry in the page to automatically connect.

To the display of DisplayServ, you must enable the option `use_displayserv` in the configuration `adminserv.cfg.php`. All about Displayserv: [http://code.google.com/p/adminserv/wiki/DisplayServ]

=Specifications on pages=

==General==
  * Data are updated every 10 seconds.
  * The display of the page is different if the game mode is *Team*. Below the Information of the map, there is the possibility to force scores (sending a message to the server for each change), and players are sorted and displayed by team. There are also two new buttons to change the team of players.
  * The button *Cancel the Vote* appears only if the vote is in progress on the server.
  * It is possible to stop the server only on this page. Use the `?stop` in the url. This action is available only to the level SuperAdmin.

=Server options==
  * The information is changed directly on the server but are not stored in the configuration file `dedicated_cfg.txt`
  * For the name and comment of the server, there is an overview of the display ingame.

==Game information==
  * At each selection of a new game mode, the configuration is loaded below.
  * This game information can be saved in the current matchsettings.

==Chat==
  * Data are collected every 3 seconds.
  * The link at the top right *Hide Rows of the server* will hide the rows that are generated by the server manager. Only lines of players will then be displayed.
  * The nickname, if specified, appears in the chat as: `[admin:Nickname] Message` 
  * You can press enter in the message field to send your text.

==Maps - List==
  * The current map is highlighted in yellow. No action is possible for this map.
  * From 25 maps, a link *Go to the current map* shown to scroll toward it.

==Maps - Local==
  * If you click on a folder, you have the folder's options. Then you can rename, move or delete a folder.
  * All actions work with several maps. For the download action, you will have a zip file containing all maps. For the delete action, there is always a confirmation to perform.
  * If maps are highlighted in yellow, is that they were recently added or modified.

==Maps - Send==
  * *Add*: to add maps at the end of list
  * *Insert*: to insert maps after the current map
  * *Send*: to simply send in the folder chosen.
  * For the upload, you can upload multiple files simultaneously. Either by drag in the corresponding frame or by clicking on *Browse...*

==Maps - Order==
  * The current map is excluded from the display. At registration, the list will be sorted after the current map.

==Maps - MatchSettings==
  * If the line is highlighted in yellow, is that the matchsettings was recently modified.

==Maps - Create MatchSettings==
  * A message appears if the name of the matchsettings exists. If you save without changing the name, it will be overwritten.

==Plugins==
  * List only the plugins compatible with the server version (ManiaPlanet or TmForever) and with the admin level.
  * All about plugins: [http://code.google.com/p/adminserv/wiki/Plugins]

==Guest-Bans==
  * You can add a player on the server (or have to login). If you want to add a player to a specific playlist, you must load first the playlist.